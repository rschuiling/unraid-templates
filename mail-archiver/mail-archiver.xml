<?xml version="1.0"?>
<Container version="2">
  <Name>mail-archiver</Name>
  <Repository>s1t5/mailarchiver</Repository>
  <Registry>https://hub.docker.com/r/s1t5/mailarchiver</Registry>
  <Network>bridge</Network>
  <MyIP/>
  <Shell>sh</Shell>
  <Privileged>false</Privileged>
  <Support>https://forums.unraid.net/topic/194065-support-mail-archiver/</Support>
  <Project>https://github.com/s1t5/mail-archiver</Project>
  <Overview>Mail Archiver is a web-based solution for archiving, searching, and exporting emails. All emails and attachments are stored in a Postgresql database.&#13;
&#13;
Also supports OpenID Connect (OIDC) for Single Sign On. The documentation contains examples for Authelia and Microsoft Entra ID.</Overview>
  <Category>Other:</Category>
  <WebUI>http://[IP]:[PORT:5000]</WebUI>
  <TemplateURL/>
  <Icon>https://raw.githubusercontent.com/rschuiling/unraid-templates/refs/heads/main/icons/envelope-check.png</Icon>
  <ExtraParams/>
  <PostArgs/>
  <CPUset/>
  <DateInstalled>1766175717</DateInstalled>
  <DonateText/>
  <DonateLink/>
  <Requires>PostgreSQL database container (e.g. postgresql17).</Requires>
  <Config Name="Web UI Port" Target="5000" Default="5000" Mode="tcp" Description="Web interface port" Type="Port" Display="always" Required="true" Mask="false">5000</Config>
  <Config Name="Folder for Data Protection Keys" Target="/app/DataProtection-Keys" Default="/mnt/user/appdata/mailarchiver/data-protection-keys" Mode="rw" Description="Folder for storing data protection keys" Type="Path" Display="always" Required="true" Mask="false">/mnt/user/appdata/mailarchiver/data-protection-keys</Config>
  <Config Name="Database Connection String" Target="ConnectionStrings__DefaultConnection" Default="Host=postgres-ip-address;Port=5432;Database=MailArchiver;Username=mailuser;Password=masterkey;" Mode="" Description="PostgreSQL connection string. Format: Host=postgres-ip-address;Port=5432;Database=dbname;Username=user;Password=pass; Replace 'postgres' with your PostgreSQL IP address (on bridge network) or container name (on custom network) and update credentials as needed." Type="Variable" Display="always" Required="true" Mask="false">Host=postgres;Port=5432;Database=MailArchiver;Username=mailuser;Password=masterkey;</Config>
  <Config Name="Admin Username" Target="Authentication__Username" Default="admin" Mode="" Description="The username for the admin account." Type="Variable" Display="always" Required="true" Mask="false">admin</Config>
  <Config Name="Admin Password" Target="Authentication__Password" Default="secure123!" Mode="" Description="The password for the admin account." Type="Variable" Display="always" Required="true" Mask="true">secure123!</Config>
  <Config Name="Display Time Zone" Target="TimeZone__DisplayTimeZoneId" Default="Etc/UTC" Mode="" Description="The time zone used for displaying email timestamps in the UI. Use any TZ identifier from: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" Type="Variable" Display="always" Required="true" Mask="false">Etc/UTC</Config>
  <Config Name="OAuth Enabled" Target="OAuth__Enabled" Default="false" Mode="" Description="Set to true to enable OIDC authentication." Type="Variable" Display="always" Required="false" Mask="false">false</Config>
  <Config Name="OAuth Authority" Target="OAuth__Authority" Default="https://auth.example.com/" Mode="" Description="The OIDC authority/issuer URL of your identity provider (e.g. for Authelia: https://auth.example.com/). Note the trailing slash at the end." Type="Variable" Display="always" Required="false" Mask="false">https://auth.example.com/</Config>
  <Config Name="OAuth Client Id" Target="OAuth__ClientId" Default="mail-archiver" Mode="" Description="OIDC client ID configured in your identity provider (e.g. Authelia) for Mail Archiver." Type="Variable" Display="always" Required="false" Mask="false">mail-archiver</Config>
  <Config Name="OAuth Client Secret" Target="OAuth__ClientSecret" Default="" Mode="" Description="Client secret for the OIDC client." Type="Variable" Display="always" Required="false" Mask="true"/>
  <Config Name="OAuth Disable Password Login" Target="OAuth__DisablePasswordLogin" Default="false" Mode="" Description="Set to true to disable traditional username/password login and enforce OAuth-only authentication." Type="Variable" Display="always" Required="false" Mask="false">false</Config>
  <Config Name="OAuth Client Scopes 0" Target="OAuth__ClientScopes__0" Default="openid" Mode="" Description="Scope #1 as requested from the identity provider." Type="Variable" Display="advanced" Required="false" Mask="false">openid</Config>
  <Config Name="OAuth Client Scopes 1" Target="OAuth__ClientScopes__1" Default="profile" Mode="" Description="Scope #2 as requested from the identity provider." Type="Variable" Display="advanced" Required="false" Mask="false">profile</Config>
  <Config Name="OAuth Client Scopes 2" Target="OAuth__ClientScopes__2" Default="email" Mode="" Description="Scope #3 as requested from the identity provider." Type="Variable" Display="advanced" Required="false" Mask="false">email</Config>
  <Config Name="Session Timeout (Minutes)" Target="Authentication__SessionTimeoutMinutes" Default="60" Mode="" Description="The session timeout in minutes." Type="Variable" Display="advanced" Required="false" Mask="false">60</Config>
  <Config Name="Cookie Name" Target="Authentication__CookieName" Default="MailArchiverAuth" Mode="" Description="The name of the authentication cookie." Type="Variable" Display="advanced" Required="false" Mask="false">MailArchiverAuth</Config>
  <Config Name="Mail Sync Interval (Minutes)" Target="MailSync__IntervalMinutes" Default="15" Mode="" Description="The interval in minutes between email synchronization." Type="Variable" Display="advanced" Required="false" Mask="false">15</Config>
  <Config Name="Mail Sync Timeout (Minutes)" Target="MailSync__TimeoutMinutes" Default="60" Mode="" Description="The timeout for the sync operation in minutes." Type="Variable" Display="advanced" Required="false" Mask="false">60</Config>
  <Config Name="Connection Timeout (Seconds)" Target="MailSync__ConnectionTimeoutSeconds" Default="180" Mode="" Description="The connection timeout for IMAP connections in seconds." Type="Variable" Display="advanced" Required="false" Mask="false">180</Config>
  <Config Name="Command Timeout (Seconds)" Target="MailSync__CommandTimeoutSeconds" Default="300" Mode="" Description="The command timeout for IMAP commands in seconds." Type="Variable" Display="advanced" Required="false" Mask="false">300</Config>
  <Config Name="Always Force Full Sync" Target="MailSync__AlwaysForceFullSync" Default="false" Mode="" Description="Whether to always force a full sync (true/false)." Type="Variable" Display="advanced" Required="false" Mask="false">false</Config>
  <Config Name="Ignore Self-Signed Certificates" Target="MailSync__IgnoreSelfSignedCert" Default="false" Mode="" Description="Whether to ignore self-signed certificates (true/false)." Type="Variable" Display="advanced" Required="false" Mask="false">false</Config>
  <Config Name="Batch Restore Async Threshold" Target="BatchRestore__AsyncThreshold" Default="50" Mode="" Description="The number of emails that triggers async processing." Type="Variable" Display="advanced" Required="false" Mask="false">50</Config>
  <Config Name="Max Sync Emails" Target="BatchRestore__MaxSyncEmails" Default="150" Mode="" Description="The maximum number of emails for sync processing." Type="Variable" Display="advanced" Required="false" Mask="false">150</Config>
  <Config Name="Max Async Emails" Target="BatchRestore__MaxAsyncEmails" Default="50000" Mode="" Description="The maximum number of emails for async processing." Type="Variable" Display="advanced" Required="false" Mask="false">50000</Config>
  <Config Name="Batch Restore Session Timeout (Minutes)" Target="BatchRestore__SessionTimeoutMinutes" Default="30" Mode="" Description="The session timeout for batch restore in minutes." Type="Variable" Display="advanced" Required="false" Mask="false">30</Config>
  <Config Name="Default Batch Size" Target="BatchRestore__DefaultBatchSize" Default="50" Mode="" Description="The default batch size for email operations." Type="Variable" Display="advanced" Required="false" Mask="false">50</Config>
  <Config Name="Batch Operation Size" Target="BatchOperation__BatchSize" Default="50" Mode="" Description="The batch size for email operations." Type="Variable" Display="advanced" Required="false" Mask="false">50</Config>
  <Config Name="Pause Between Emails (ms)" Target="BatchOperation__PauseBetweenEmailsMs" Default="50" Mode="" Description="The pause between individual emails in milliseconds." Type="Variable" Display="advanced" Required="false" Mask="false">50</Config>
  <Config Name="Pause Between Batches (ms)" Target="BatchOperation__PauseBetweenBatchesMs" Default="250" Mode="" Description="The pause between batches in milliseconds." Type="Variable" Display="advanced" Required="false" Mask="false">250</Config>
  <Config Name="Max Selectable Emails" Target="Selection__MaxSelectableEmails" Default="250" Mode="" Description="The maximum number of emails that can be selected at once." Type="Variable" Display="advanced" Required="false" Mask="false">250</Config>
  <Config Name="Database Command Timeout" Target="Npgsql__CommandTimeout" Default="900" Mode="" Description="The timeout for database commands in seconds." Type="Variable" Display="advanced" Required="false" Mask="false">900</Config>
  <Config Name="Max Upload File Size (GB)" Target="Upload__MaxFileSizeGB" Default="10" Mode="" Description="The maximum file size for uploads in GB." Type="Variable" Display="advanced" Required="false" Mask="false">10</Config>
  <Config Name="Upload Keep Alive Timeout (Hours)" Target="Upload__KeepAliveTimeoutHours" Default="4" Mode="" Description="The keep alive timeout for uploads in hours." Type="Variable" Display="advanced" Required="false" Mask="false">4</Config>
  <Config Name="Upload Request Headers Timeout (Hours)" Target="Upload__RequestHeadersTimeoutHours" Default="2" Mode="" Description="The timeout for request headers in hours." Type="Variable" Display="advanced" Required="false" Mask="false">2</Config>
  <TailscaleStateDir/>
</Container>
